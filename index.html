<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Snowflake Migration Mock-Up</title>
    <link rel="stylesheet" type="text.css" href="./scss/normalize.css" />
    <link rel="stylesheet" href="./scss/main.css" />
    <link rel="stylesheet" href="./scss/fonts.css" />
    <link rel="stylesheet" href="./scss/fontawesome-all.css" />
    <link rel="stylesheet" href="./scss/google.css" />
  </head>
  <body>
    <script>
      const privateKey = "hey I am here!";
      console.log(privateKey);
    </script>
    <div class="Page">
      <div class="PipelineCreatePage">
        <div class="Container">
          <h1>Snowflake Key Pair Authentication Migration</h1>
        </div>
        <div class="Container">
          <div class="SourceAdd">
            <div class="Group">
              <button class="Button" type="button">
                <i class="Icon fas fa-arrow-left"></i>Back
              </button>
            </div>
            <div class="ConnectorForm">
              <div class="Instructions">
                <p>
                  Snowflake is phasing out password-based credentials for
                  service accounts. A service account gives Precog access to
                  write to your data warehouse and database. If your Snowflake
                  destination is configured with password-based credentials,
                  then your Precog data pipelines are at risk. To avoid any
                  disruptions in your data flow, you will need to reconfigure
                  your Precog and Snowflake accounts to use Key Pair
                  authentication. Follow the directions below, and once you have
                  completed them successfully, click on the
                  <strong>Complete Migration</strong> button.
                </p>
                <p>
                  If you already have key-pair authentication set up, or if you
                  want to generate your own key-pair. Click
                  <a href="edit-pipeline.html">here</a> to be redirected to your
                  Snowflake destination, where you can upload your private key
                  and enter your encryption password. For more information refer
                  to the
                  <a
                    href="https://docs.snowflake.com/en/user-guide/key-pair-auth"
                    >Snowflake Key Pair documentation</a
                  >.
                </p>
                <!-- <p>
                  For more information refer to the
                  <a
                    href="https://docs.snowflake.com/en/user-guide/key-pair-auth"
                    >Snowflake documentation</a
                  >.
                </p> -->
                <h2>Instructions</h2>
                <ol class="InstructionList">
                  <li class="InstructionList-item">
                    Log in to your Snowflake account. You must have Account
                    Admin privileges to alter the service account.
                  </li>
                  <li class="InstructionList-item">
                    <p>
                      Create a new SQL Worksheet. Click on
                      <strong>+ Create</strong> in the top left navigation and
                      then choose <strong>SQL Worksheet</strong>.
                    </p>
                    <img
                      class="InstructionsImage"
                      src="img/sql-worksheet.png"
                    />
                  </li>
                  <li class="InstructionList-item">
                    <p>
                      The following SQL statement assigns a public key to your
                      Snowflake service account. The corresponding encrypted
                      private key has already been generated for your Precog
                      configuration. Copy and paste the following SQL statement
                      into the worksheet:
                    </p>
                    <div class="CodeBlock">
                      <pre class="CodeBlock-code">

ALTER USER precog SET RSA_PUBLIC_KEY='MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAv2DlVK6BMWLYYNwmZYIcUSRzpuS2xs8ZF5QDBYpK3TrDiK1Xe2RtXy2zwJUj7P5A9KzPw5BUJ11sAlOit+WspHl2/QkCs7jYzqd7oWIsTGZ0OUhDtbvR+Z2P0rv/uHHWDxQOLAJ4z47x4cMB5vViId+BMJ4+IYcxSzarqAL6YunadLfUne3EI+iCW0QFJZRiUHEidmlKGMJouMqENA067uHHouzUluxrjUvehQELzxSiUrA4Esd/bx28On8oXcQxAgOH2yFAnLOfeIptxsQkYwW5JIGoXDudodrw1rYE/aJAXlTbEdg+ta5ehsRdWVCvk+J8sySUXC5Dl9MxJS6BgwIDAQAB';
</pre
                      >
                      <button class="Button CodeBlock-copyButton" type="button">
                        <i class="Icon fas fa-clipboard"></i>Copy
                      </button>
                    </div>
                  </li>
                  <li class="InstructionList-item">
                    <p>
                      Click on the <strong>Run</strong> option, the arrow icon
                      in the top right corner.
                    </p>
                  </li>
                  <li class="InstructionList-item">
                    <p>
                      Verify that the "Statement executed successfully" before
                      clicking the Complete Migration button.
                    </p>
                    <img
                      class="InstructionsImage"
                      src="img/snowflake-success-rsa-key.png"
                    />
                    <p>
                      <strong>Note:</strong> If you refresh or reload this page,
                      you will need to rerun the SQL statement in Snowflake as
                      the paired private key will have been regenerated.
                    </p>
                  </li>
                  <li class="InstructionList-item">
                    <p>
                      When you are ready, click the Complete Migration button.
                    </p>
                  </li>
                </ol>
              </div>
              <div class="Group">
                <div class="ButtonGroup">
                  <button class="Button" type="button">
                    <i class="Icon fas fa-times"></i>Cancel
                  </button>
                  <a class="Button" type="button" href="submitted.html">
                    <i class="Icon fas fa-check"></i>Complete Migration
                  </a>
                  <!-- <a class="Button" type="button" href="submitted.html">
                    <i class="Icon fas fa-angle-double-right"></i>Complete
                    Migration
                  </a> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
